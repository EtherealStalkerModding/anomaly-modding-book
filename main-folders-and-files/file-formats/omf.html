<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>.omf - Anomaly Modding Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../src/custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../../meta/index.html"><strong aria-hidden="true">1.</strong> Meta</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../meta/links.html"><strong aria-hidden="true">1.1.</strong> Links</a></li><li class="chapter-item expanded "><a href="../../meta/contributing/index.html"><strong aria-hidden="true">1.2.</strong> Contributing to this book</a></li><li class="chapter-item expanded "><a href="../../meta/acknowledgements.html"><strong aria-hidden="true">1.3.</strong> Acknowledgements</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../terminology/terminology.html"><strong aria-hidden="true">2.</strong> Terminology</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../../getting-started/index.html"><strong aria-hidden="true">3.</strong> Getting Started</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../getting-started/installing-mo2.html"><strong aria-hidden="true">3.1.</strong> Installing MO2</a></li><li class="chapter-item expanded "><a href="../../getting-started/addon-installers.html"><strong aria-hidden="true">3.2.</strong> Addon installers</a></li><li class="chapter-item expanded "><a href="../../getting-started/package-naming.html"><strong aria-hidden="true">3.3.</strong> Package Naming for MO2</a></li><li class="chapter-item expanded "><a href="../../getting-started/vs-code-game-files-setup.html"><strong aria-hidden="true">3.4.</strong> Configuring VSCode-like programs to handle game files</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Addons</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../addons/dltx.html"><strong aria-hidden="true">4.1.</strong> DLTX</a></li><li class="chapter-item expanded "><a href="../../addons/dxml.html"><strong aria-hidden="true">4.2.</strong> DXML</a></li><li class="chapter-item expanded "><a href="../../addons/monkey-patching.html"><strong aria-hidden="true">4.3.</strong> Monkey patching</a></li><li class="chapter-item expanded "><a href="../../addons/useful-addons-scripts-utils.html"><strong aria-hidden="true">4.4.</strong> Useful addons, scripts and utils</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../crashes/crashes-list.html"><strong aria-hidden="true">5.</strong> Crash List</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/index.html"><strong aria-hidden="true">6.</strong> Main Folders And Files</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/index.html"><strong aria-hidden="true">6.1.</strong> File Formats</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/binary-files.html"><strong aria-hidden="true">6.1.1.</strong> Binary files</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/anm.html"><strong aria-hidden="true">6.1.2.</strong> .anm</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/cform.html"><strong aria-hidden="true">6.1.3.</strong> .cform</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/dds.html"><strong aria-hidden="true">6.1.4.</strong> .dds</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/bump.html"><strong aria-hidden="true">6.1.4.1.</strong> bump.dds</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/bump_hash.html"><strong aria-hidden="true">6.1.4.2.</strong> bump#.dds</a></li></ol></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/detals.html"><strong aria-hidden="true">6.1.5.</strong> .details</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/dm.html"><strong aria-hidden="true">6.1.6.</strong> .dm</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/object.html"><strong aria-hidden="true">6.1.7.</strong> .object</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/omf.html" class="active"><strong aria-hidden="true">6.1.8.</strong> .omf</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/ogg.html"><strong aria-hidden="true">6.1.9.</strong> .ogg</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/hom.html"><strong aria-hidden="true">6.1.10.</strong> .hom</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/level.html"><strong aria-hidden="true">6.1.11.</strong> level</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/ltx.html"><strong aria-hidden="true">6.1.12.</strong> .ltx</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/err.html"><strong aria-hidden="true">6.1.13.</strong> .err</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/geom.html"><strong aria-hidden="true">6.1.14.</strong> .geom</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/efd.html"><strong aria-hidden="true">6.1.15.</strong> .efd</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/seq.html"><strong aria-hidden="true">6.1.16.</strong> .seq</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/som.html"><strong aria-hidden="true">6.1.17.</strong> .som</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/thm.html"><strong aria-hidden="true">6.1.18.</strong> .thm</a></li><li class="chapter-item expanded "><a href="../../main-folders-and-files/file-formats/xml.html"><strong aria-hidden="true">6.1.19.</strong> .xml</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Configs</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../configs/condlists.html"><strong aria-hidden="true">7.1.</strong> Condlists</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.2.</strong> Changing an item</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.3.</strong> Creating your own item</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.4.</strong> Dialogues</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../configs/items/weapons/w_(weapon).ltx.html"><strong aria-hidden="true">7.4.1.</strong> Weapon Configuration Parameters</a></li><li class="chapter-item expanded "><a href="../../configs/items/weapons/weapon_ammo.ltx.html"><strong aria-hidden="true">7.4.2.</strong> Ammo Configuration Parameters</a></li><li class="chapter-item expanded "><a href="../../configs/items/weapons/weapon_sounds.ltx.html"><strong aria-hidden="true">7.4.3.</strong> Weapon Sounds Parameters</a></li><li class="chapter-item expanded "><a href="../../configs/items/outfits/o_(outfit).ltx.html"><strong aria-hidden="true">7.4.4.</strong> Oufits Configuration Parameters</a></li><li class="chapter-item expanded "><a href="../../configs/creatures/m_(mutant).ltx.html"><strong aria-hidden="true">7.4.5.</strong> Mutants Configuration Parameters</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../scripting/index.html"><strong aria-hidden="true">8.</strong> Scripting</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../scripting/codebase_introduction.html"><strong aria-hidden="true">8.1.</strong> Introduction to codebase</a></li><li class="chapter-item expanded "><a href="../../scripting/codestyle.html"><strong aria-hidden="true">8.2.</strong> Codestyle</a></li><li class="chapter-item expanded "><a href="../../scripting/wetting_hands.html"><strong aria-hidden="true">8.3.</strong> Wetting our hands</a></li><li class="chapter-item expanded "><a href="../../scripting/callbacks.html"><strong aria-hidden="true">8.4.</strong> Callbacks</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.5.</strong> Engine classes</div></li><li class="chapter-item expanded "><a href="../../scripting/mcm.html"><strong aria-hidden="true">8.6.</strong> MCM</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.7.</strong> UI</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.8.</strong> Scripted dialogues</div></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Modelling</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blender/index.html"><strong aria-hidden="true">9.1.</strong> Blender</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blender/creating-model-in-blender.html"><strong aria-hidden="true">9.1.1.</strong> Creating model in Blender</a></li><li class="chapter-item expanded "><a href="../../blender/creating-a-location-in-blender.html"><strong aria-hidden="true">9.1.2.</strong> Creating a location in Blender</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Animating</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blender/index.html"><strong aria-hidden="true">10.1.</strong> Blender</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blender/creating-camera-animations.html"><strong aria-hidden="true">10.1.1.</strong> Creating animations for the camera</a></li><li class="chapter-item expanded "><a href="../../blender/creating-hud-animation-in-blender.html"><strong aria-hidden="true">10.1.2.</strong> Creating an animation in Blender for a HUD object</a></li><li class="chapter-item expanded "><a href="../../blender/editing-existing-animations.html"><strong aria-hidden="true">10.1.3.</strong> Editing existing animations</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../texturing/index.html"><strong aria-hidden="true">11.</strong> Texturing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../texturing/сreating-and-preparing-textures.html"><strong aria-hidden="true">11.1.</strong> Creating and preparing textures</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../shaders/index.html"><strong aria-hidden="true">12.</strong> Shading</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../shaders/shaders-list/materials-list.html"><strong aria-hidden="true">12.1.</strong> Material Shaders List</a></li><li class="chapter-item expanded "><a href="../../shaders/shaders-list/shaders-list.html"><strong aria-hidden="true">12.2.</strong> Shaders List</a></li><li class="chapter-item expanded "><a href="../../shaders/shaders-list/compiler-shaders-list.html"><strong aria-hidden="true">12.3.</strong> Compiler Shaders List</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../mapping/index.html"><strong aria-hidden="true">13.</strong> Mapping</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mapping/compiling-maps.html"><strong aria-hidden="true">13.1.</strong> Compiling maps</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.</strong> AI</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">14.1.</strong> Editing .efd files</div></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../engine/index.html"><strong aria-hidden="true">15.</strong> Engine</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../engine/console-commands.html"><strong aria-hidden="true">15.1.</strong> Console commands</a></li><li class="chapter-item expanded "><a href="../../engine/compiling.html"><strong aria-hidden="true">15.2.</strong> Compiling</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.3.</strong> Architecture</div></li><li class="chapter-item expanded "><a href="../../engine/engines-list.html"><strong aria-hidden="true">15.4.</strong> Engines List</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../quests/index.html"><strong aria-hidden="true">16.</strong> Quests</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../quests/introduction.html"><strong aria-hidden="true">16.1.</strong> Introduction TO REDO</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.2.</strong> DON'T USE WTF</div></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../modding-tools/modding-tools.html"><strong aria-hidden="true">17.</strong> Modding Tools List</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../sdk/index.html"><strong aria-hidden="true">17.1.</strong> SDK 0.7</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../sdk/interface.html"><strong aria-hidden="true">17.1.1.</strong> Interface</a></li><li class="chapter-item expanded "><a href="../../sdk/actor-editor.html"><strong aria-hidden="true">17.1.2.</strong> Actor Editor</a></li><li class="chapter-item expanded "><a href="../../sdk/image-editor.html"><strong aria-hidden="true">17.1.3.</strong> Image Editor</a></li><li class="chapter-item expanded "><a href="../../sdk/level-editor.html"><strong aria-hidden="true">17.1.4.</strong> Level Editor</a></li></ol></li><li class="chapter-item expanded "><a href="../../blender/index.html"><strong aria-hidden="true">17.2.</strong> Blender</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blender/blender-x-ray-addon-summary.html"><strong aria-hidden="true">17.2.1.</strong> Blender X-Ray Addon</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blender/addon-installation-and-setup.html"><strong aria-hidden="true">17.2.1.1.</strong> Addon installation and setup</a></li><li class="chapter-item expanded "><a href="../../blender/addon-settings-options/index.html"><strong aria-hidden="true">17.2.1.2.</strong> Advanced settings</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../blender/addon-settings-options/n-panel-description.html"><strong aria-hidden="true">17.2.1.2.1.</strong> N-panel description</a></li><li class="chapter-item expanded "><a href="../../blender/addon-settings-options/pathes.html"><strong aria-hidden="true">17.2.1.2.2.</strong> Pathes</a></li><li class="chapter-item expanded "><a href="../../blender/addon-settings-options/defaults.html"><strong aria-hidden="true">17.2.1.2.3.</strong> Defaults</a></li><li class="chapter-item expanded "><a href="../../blender/addon-settings-options/formats.html"><strong aria-hidden="true">17.2.1.2.4.</strong> Formats</a></li><li class="chapter-item expanded "><a href="../../blender/addon-settings-options/custom-props.html"><strong aria-hidden="true">17.2.1.2.5.</strong> Custom Props</a></li><li class="chapter-item expanded "><a href="../../blender/addon-settings-options/others.html"><strong aria-hidden="true">17.2.1.2.6.</strong> Others</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../modding-tools/thm-editor-by-i-love-kfc.html"><strong aria-hidden="true">17.3.</strong> THM Editor</a></li><li class="chapter-item expanded "><a href="../../modding-tools/bump-generator.html"><strong aria-hidden="true">17.4.</strong> Bump Generator</a></li><li class="chapter-item expanded "><a href="../../modding-tools/savandt.html"><strong aria-hidden="true">17.5.</strong> Sound Attribute Viewer And Tweaker</a></li><li class="chapter-item expanded "><a href="../../modding-tools/thm-editor-by-valerok.html"><strong aria-hidden="true">17.6.</strong> Modified THM Editor</a></li><li class="chapter-item expanded "><a href="../../modding-tools/omf-editor-by-valerok.html"><strong aria-hidden="true">17.7.</strong> Modified OMF Editor</a></li><li class="chapter-item expanded "><a href="../../modding-tools/ogf-editor-by-valerok.html"><strong aria-hidden="true">17.8.</strong> Modified OGF Editor</a></li><li class="chapter-item expanded "><a href="../../modding-tools/xray-export-tool.html"><strong aria-hidden="true">17.9.</strong> X-Ray Export Tool</a></li><li class="chapter-item expanded "><a href="../../modding-tools/universal-x64-level-compilers.html"><strong aria-hidden="true">17.10.</strong> Universal x64 level compilers</a></li><li class="chapter-item expanded "><a href="../../modding-tools/xrcompress-by-i-love-kfc.html"><strong aria-hidden="true">17.11.</strong> xrCompress</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../resources/index.html"><strong aria-hidden="true">18.</strong> Resources</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../resources/audio.html"><strong aria-hidden="true">18.1.</strong> Audio</a></li><li class="chapter-item expanded "><a href="../../resources/models-objects-locations.html"><strong aria-hidden="true">18.2.</strong> Models</a></li><li class="chapter-item expanded "><a href="../../resources/sdk-resources.html"><strong aria-hidden="true">18.3.</strong> SDK resources</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Anomaly Modding Book</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Igigog/anomaly-modding-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/Igigog/anomaly-modding-book/edit/main/src/main-folders-and-files/file-formats/omf.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="omf-open-motions-format"><a class="header" href="#omf-open-motions-format">.omf (Open Motions Format)</a></h1>
<hr />
<h2 id="about"><a class="header" href="#about">About</a></h2>
<p>A specialized S.T.A.L.K.E.R. game format containing animations. This is a separate dedicated file used in conjunction with .ogf models. Was created in order to optimize process when some different models use the same list of animations.</p>
<h2 id="technical-information"><a class="header" href="#technical-information">Technical information</a></h2>
<p>They are in <a href="https://en.wikipedia.org/wiki/Resource_Interchange_File_Format">RIFF</a> format. That is, the file is divided into chunks.
The omf file consists of two chunks:</p>
<ul>
<li>
<p>0xE - stores animations (rotation, movement of bones)</p>
</li>
<li>
<p>0xF - stores the Bone Parts and animation parameters.</p>
</li>
</ul>
<p>These chunks can be found inside the ogf files.
In other words, an omf file is a slice of an ogf file that is moved to an external file.
The structure of the 0xE and 0xF chunks in ogf is identical to those in omf.</p>
<h3 id="the-structure-of-the-0xe-chunk"><a class="header" href="#the-structure-of-the-0xe-chunk">The structure of the 0xE chunk</a></h3>
<p>This chunk consists of nested chunks.
The first nested chunk is the one with the identifier 0x0.
The zero chunk stores an unsigned 32-bit integer number.
This number indicates the number of animations in the omf file.
The identifier of each subsequent chunk is one more than the previous one.
That is, 0x0 is followed by 0x1, then 0x2, 0x3, etc.
All the chunks following 0x0 contain animations.
Description of the nested chunk that stores the animations
The animation name comes first, which is a string ending with a null byte.
Next is an unsigned 32-bit integer, which specifies the number of animation frames.
The following data is the dice transforms. For each bone, rotation, movement, and flags are stored.
Flags come first. Flags is an unsigned 8 bit integer.
The first bit of this byte indicates if the movement is modifiable.
If the bit is 1, then the movement has values throughout all frames.
If the bit is 0, then the movement has only one value for the entire animation interval.
This is done to optimize it so that it doesn't store a bunch of identical keys, but instead has a single value.
The second bit of this byte indicates whether the rotation is static (not changing throughout the animation).
The third bit is the High Quality flag. If it is 0, then the position has an 8-bit representation, otherwise it is 16-bit.
Next comes the information about the rotation.
What will be written to the file next depends on the flags.
If the second bit of the flag is 0, the file will contain the following:
One rotation value as a quaternion with two-byte signed components.
That is, QXYZ, each 2 bytes, for a total of 8 bytes.
And if the second bit of the flag is 1, then the following follows:
crc32 sum as a 4 byte unsigned integer.
And after that come the rotation quaternion values for each frame.
The format of rotation is the same as described above (the same 8 bytes).
Now comes the movement information.
If the first bit of the flag is 1, then follows a 32-bit unsigned integer, which is the crc32 sum.
This is followed by three eight-bit numbers, which indicate the position of the bone on the x, y, z axes.
These positions are written for each frame.
That is, the positions should be read in a loop, which is repeated as many times as the number of frames contains the animation.
After all these positions are data about the initial conditions of movement:
Amplitude or size of movement.
These are three float numbers (4 bytes each).
And then there is the initial value of movement. These are also 3 float numbers.
These initial conditions are stored in a single instance for each bone in this animation.
That is, these values do not change throughout the animation.
If the first bit of the flag is 0, there is one move value for all frames.
This movement is stored in 3 float numbers (4 bytes each).</p>
<p>Below is a pseudocode that describes one animation:</p>
<pre><code class="language-C++">name = string
length = uint32
for bone in bones {
    flags = uint8
    translate_present = flags(0)    // get bit 0
    rotate_absent = flags(1)    // get bit 1
    high_quality = flags(2)    // get bit 2
    if rotate_absent {
        quaternion = int16, int16, int16, int16    // Q, X, Y, Z
    } else {
        motion_crc32 = int32
        for (i=0, i&lt;length, i++) {
            quaternion = int16, int16, int16, int16    // Q, X, Y, Z
        }
    }
    if translate_present {
        motion_crc32 = int32
        if high_quality {
            for (i=0, i&lt;length, i++) {
                translation = int16, int16, int16    // X, Y, Z
            }
        } else {
            for (i=0, i&lt;length, i++) {
                translation = int8, int8, int8    // X, Y, Z
            }
        }
        translate_size = float, float, float    // X, Y, Z
        translate_init = float, float, float    // X, Y, Z
    } else {
        translate = float, float, float    // X, Y, Z
    }
</code></pre>
<h3 id="chunk-structure-0xf"><a class="header" href="#chunk-structure-0xf">Chunk structure 0xF</a></h3>
<p>Stores bone parts and animation parameters.
The code that describes this chunk is shown below:</p>
<pre><code class="language-C++">params_version = uint16 // parameter format version
partition_count = uint16 // number of bone parts
for (i=0, i&lt;partition_count, i++) {
    partition_name = string // name of the bone part
    bone_count = uint16 // number of bones in this bone part
    for (j=0, j&lt;bone_count, j++) {
        if params_version == 3 {
            bone_name = string // bone name
            bone_id = uint32 // bone ID
        }
    }
    motion_count = uint16 // number of animations
    for (j=0, i&lt;motion_count, j++) {
        // animation parameters
        motion_name = string
        motion_flags = uint32
        bone_or_part = uint16
        motion = uint16 // animation identifier from the 0xE chunk
        speed = float32
        power = float32
        accrue = float32
        falloff = float32
    }
}
</code></pre>
<hr />
<h2 id="programs-editing-this-file"><a class="header" href="#programs-editing-this-file">Programs editing this file</a></h2>
<ul>
<li><a href="../../blender/index.html">Blender (X-Ray Addon)</a></li>
<li><a href="../../modding-tools/omf-editor-by-valerok.html">OMF Editor by ValeroK</a></li>
</ul>
<h2 id="sources"><a class="header" href="#sources">Sources</a></h2>
<p><a href="http://stalkerin.gameru.net/wiki/index.php?title=%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_*.omf">Source</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../main-folders-and-files/file-formats/object.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../main-folders-and-files/file-formats/ogg.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../main-folders-and-files/file-formats/object.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../main-folders-and-files/file-formats/ogg.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
